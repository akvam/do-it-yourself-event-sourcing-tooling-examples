Acme.OnlineShop:
  events:
    CustomerStartedShopping:
      doc: 'When the customer enters the online shop the `CustomerStartedShopping` event is recorded.'
      attributes:
        cartId: ~
        customerId: ~
        startedShoppingAt: ~

    ProductWasAddedToCart:
      attributes:
        cartId: ~
        customerId: ~
        sku:
          doc: 'The "Stock Keeping Unit" from the Product Catalog 2.0'
        priceInCents:
          constrainType: 'int'
        currency: ~
        addedAt: ~

    ProductWasRemovedFromCart:
      attributes:
        cartId: ~
        customerId: ~
        sku:
          doc: 'The "Stock Keeping Unit" from the Product Catalog 2.0'
        priceInCents:
          constrainType: 'int'
        currency: ~
        removedAt: ~

    CustomerPlacedOrder:
      attributes:
        cartId: ~
        customerId: ~
        orderId: ~
        orderLines:
          constrainType: 'array'
        orderPlacedAt: ~

    CustomerAbandonedCart:
      doc: 'After an extended period of no activity the `CustomerStartedShopping` event is recorded.'
      attributes:
        cartId: ~
        customerId: ~
        abandonedAt: ~

  commands:
    StartShopping:
      doc: "Start the online shopping process by dispatching this command."
      attributes:
        cartId: ~
        customerId: ~
        startTime: ~

    AddProductToCart:
      attributes:
        cartId: ~
        sku: ~
        priceInCents: ~
        currency:
          doc: "Per cart only a single currency is supported"
        transactionTime: ~

    RemoveProductFromCart:
      attributes:
        cartId: ~
        sku: ~
        priceInCents: ~
        currency:
          doc: "Per cart only a single currency is supported"
        transactionTime: ~

    PlaceOrder:
      attributes:
        cartId: ~
        orderTime: ~
